{"version":3,"file":"index.js","mappings":"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","sources":["webpack://test/webpack/bootstrap","webpack://test/webpack/runtime/define property getters","webpack://test/webpack/runtime/hasOwnProperty shorthand","webpack://test/webpack/runtime/make namespace object","webpack://test/../yamjs-core/src/bukkit.ts","webpack://test/../yamjs-core/src/debug.ts","webpack://test/../../node_modules/vlq/src/index.js","webpack://test/../yamjs-core/src/sourceMap.ts","webpack://test/../yamjs-core/src/errors.ts","webpack://test/../yamjs-core/src/registerEvent.ts","webpack://test/../yamjs-core/src/util.ts","webpack://test/../yamjs-core/src/ticker.ts","webpack://test/../yamjs-core/src/tasks.ts","webpack://test/../yamjs-core/src/timers.ts","webpack://test/../yamjs-core/src/lifecycle.ts","webpack://test/../yamjs-core/src/initialize.ts","webpack://test/../yamjs-core/src/index.ts","webpack://test/../yamjs-legacy/src/stdlib/index.ts","webpack://test/../yamjs-legacy/src/js/index.ts","webpack://test/../yamjs-legacy/src/stdlib-paper/index.ts","webpack://test/../yamjs-legacy/src/index.ts","webpack://test/./src/index.ts"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { Bukkit } from 'org.bukkit'\r\n\r\nexport const bukkitManager = Bukkit.getPluginManager()\r\nexport const bukkitPlugin = bukkitManager.getPlugin(Yam.getConfig().pluginName)\r\nexport const bukkitServer = Bukkit.getServer()\r\n","import { Runtime, System } from 'java.lang'\r\nimport { bukkitPlugin } from './bukkit'\r\n\r\nconst scan = (javaObject: any) => {\r\n  const keys = Object.keys(javaObject)\r\n\r\n  const result = keys.reduce((acc, key) => {\r\n    const value = javaObject[key]\r\n\r\n    acc[key] = value?.toString?.()\r\n\r\n    return acc\r\n  }, {} as any)\r\n\r\n  return result\r\n}\r\n\r\nexport const getDebugInfo = () => {\r\n  const Long = Java.type('java.lang.Long') as any\r\n  const Bukkit = Java.type('org.bukkit.Bukkit')\r\n  const serverRoot = bukkitPlugin.getDataFolder().getParentFile().getParentFile()\r\n  const plugins = Bukkit.getPluginManager()\r\n    .getPlugins()\r\n    .map((plugin) => plugin.getName())\r\n\r\n  const info = {\r\n    yamJS: {\r\n      coreVersion: '0.0.1',\r\n      pluginVersion: '0.0.1',\r\n      legacyVersion: '0.0.1',\r\n\r\n      instance: scan(Yam.instance),\r\n    },\r\n\r\n    server: {\r\n      players: `${Bukkit.getOnlinePlayers().size()} / ${Bukkit.getMaxPlayers()}`,\r\n      plugins,\r\n      minecraftVersion: Bukkit.getVersion(),\r\n      bukkitVersion: Bukkit.getBukkitVersion(),\r\n      onlineMode: Bukkit.getOnlineMode(),\r\n    },\r\n\r\n    java: {\r\n      version: System.getProperty('java.version'),\r\n      vendor: System.getProperty('java.vendor'),\r\n      vendorUrl: System.getProperty('java.vendor.url'),\r\n      home: System.getProperty('java.home'),\r\n      command: System.getProperty('sun.java.command'),\r\n      timezone: System.getProperty('user.timezone'),\r\n    },\r\n\r\n    system: {\r\n      os: {\r\n        name: System.getProperty('os.name'),\r\n        version: System.getProperty('os.version'),\r\n        arch: System.getProperty('os.arch'),\r\n      },\r\n      cpu: {\r\n        cores: Runtime.getRuntime().availableProcessors(),\r\n      },\r\n      memory: {\r\n        free: Runtime.getRuntime().freeMemory(),\r\n        max:\r\n          Runtime.getRuntime().maxMemory() == Long.MAX_VALUE\r\n            ? 'unlimited'\r\n            : Runtime.getRuntime().maxMemory(),\r\n        total: Runtime.getRuntime().totalMemory(),\r\n      },\r\n      storage: {\r\n        free: serverRoot?.getFreeSpace(),\r\n        total: serverRoot?.getTotalSpace(),\r\n        usable: serverRoot?.getUsableSpace(),\r\n      },\r\n    },\r\n    // TODO: Context count\r\n    // TODO: Event registered count\r\n    // TODO: Command registered count\r\n    // TODO: Server started at\r\n    // TODO: Plugins loaded at\r\n  }\r\n\r\n  // \"   build date: \" + ManifestUtil.getManifestValue(\"Build-Date\"),\r\n  // \"   build git revision: \" + ManifestUtil.getManifestValue(\"Git-Revision\"),\r\n  // \"   build number: \" + ManifestUtil.getManifestValue(\"Build-Number\"),\r\n  // \"   build origin: \" + ManifestUtil.getManifestValue(\"Build-Origin\"),\r\n\r\n  return info\r\n}\r\n","/** @type {Record<string, number>} */\nlet char_to_integer = {};\n\n/** @type {Record<number, string>} */\nlet integer_to_char = {};\n\n'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n\t.split('')\n\t.forEach(function (char, i) {\n\t\tchar_to_integer[char] = i;\n\t\tinteger_to_char[i] = char;\n\t});\n\n/** @param {string} string */\nexport function decode(string) {\n\t/** @type {number[]} */\n\tlet result = [];\n\n\tlet shift = 0;\n\tlet value = 0;\n\n\tfor (let i = 0; i < string.length; i += 1) {\n\t\tlet integer = char_to_integer[string[i]];\n\n\t\tif (integer === undefined) {\n\t\t\tthrow new Error('Invalid character (' + string[i] + ')');\n\t\t}\n\n\t\tconst has_continuation_bit = integer & 32;\n\n\t\tinteger &= 31;\n\t\tvalue += integer << shift;\n\n\t\tif (has_continuation_bit) {\n\t\t\tshift += 5;\n\t\t} else {\n\t\t\tconst should_negate = value & 1;\n\t\t\tvalue >>>= 1;\n\n\t\t\tif (should_negate) {\n\t\t\t\tresult.push(value === 0 ? -0x80000000 : -value);\n\t\t\t} else {\n\t\t\t\tresult.push(value);\n\t\t\t}\n\n\t\t\t// reset\n\t\t\tvalue = shift = 0;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/** @param {number | number[]} value */\nexport function encode(value) {\n\tif (typeof value === 'number') {\n\t\treturn encode_integer(value);\n\t}\n\n\tlet result = '';\n\tfor (let i = 0; i < value.length; i += 1) {\n\t\tresult += encode_integer(value[i]);\n\t}\n\n\treturn result;\n}\n\n/** @param {number} num */\nfunction encode_integer(num) {\n\tlet result = '';\n\n\tif (num < 0) {\n\t\tnum = (-num << 1) | 1;\n\t} else {\n\t\tnum <<= 1;\n\t}\n\n\tdo {\n\t\tlet clamped = num & 31;\n\t\tnum >>>= 5;\n\n\t\tif (num > 0) {\n\t\t\tclamped |= 32;\n\t\t}\n\n\t\tresult += integer_to_char[clamped];\n\t} while (num > 0);\n\n\treturn result;\n}\n","/*\r\n * MIT License\r\n *\r\n * Copyright (c) 2020 https://github.com/Dysfold/craftjs/blob/17a5b811c1ed22a1e55647a89d5e360c98f3d958/LICENSE.md\r\n *\r\n * Permission is hereby granted, free of charge, to any person obtaining a copy\r\n * of this software and associated documentation files (the \"Software\"), to deal\r\n * in the Software without restriction, including without limitation the rights\r\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n * copies of the Software, and to permit persons to whom the Software is\r\n * furnished to do so, subject to the following conditions:\r\n *\r\n * The above copyright notice and this permission notice shall be included in all\r\n * copies or substantial portions of the Software.\r\n *\r\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\r\n * SOFTWARE.\r\n */\r\nimport * as vlq from 'vlq'\r\n\r\ninterface RawSourceMap {\r\n  /**\r\n   * List of source files used for this map.\r\n   */\r\n  sources: string[]\r\n\r\n  /**\r\n   * Actual mappings.\r\n   */\r\n  mappings: string\r\n}\r\n\r\ninterface SourceMap {\r\n  /**\r\n   * List of source files used for this map.\r\n   */\r\n  sources: string[]\r\n\r\n  /**\r\n   * Actual mappings.\r\n   */\r\n  mappings: number[][][]\r\n\r\n  /**\r\n   * Source map start offset. Lines before this are generated\r\n   * (e.g. by require()) and are not mapped to anything.\r\n   */\r\n  startOffset: number\r\n}\r\n\r\n/**\r\n * Line in a file with source code.\r\n */\r\ninterface SourceLine {\r\n  /**\r\n   * File path, relative to directory where compiled JS file is.\r\n   */\r\n  file: string\r\n\r\n  /**\r\n   * Line number.\r\n   */\r\n  line: number\r\n}\r\n\r\nfunction createCachedMap(raw: RawSourceMap): SourceMap {\r\n  // Parse VLQ-formatted line and column positions\r\n  const lines = raw.mappings.split(';').map((line) => line.split(','))\r\n  const decoded = lines.map((line) => line.map((col) => vlq.decode(col)))\r\n  return { sources: raw.sources, mappings: decoded, startOffset: 0 }\r\n}\r\n\r\nfunction loadSourceMap(fileContents: string): SourceMap | undefined {\r\n  const sourceMap = JSON.parse(fileContents)\r\n  return createCachedMap(sourceMap)\r\n}\r\n\r\n/**\r\n * Cached source maps.\r\n */\r\nconst cachedMaps: Map<string, SourceMap> = new Map()\r\n\r\nexport function cacheSourceMap(file: string, content: string, startOffset: number): boolean {\r\n  const map = loadSourceMap(content)\r\n\r\n  if (map) {\r\n    map.startOffset = startOffset\r\n    cachedMaps.set(file, map)\r\n    return true\r\n  }\r\n\r\n  return false\r\n}\r\n\r\nfunction mapLineInternal({ mappings, sources }: SourceMap, jsLine: number): SourceLine {\r\n  // Advance through both files and lines in source map\r\n  let sourceLine = 0\r\n  let sourceFile = 0\r\n  let result = 0\r\n  for (let i = 0; i < mappings.length; i++) {\r\n    const line = mappings[i]\r\n    line.forEach((segment) => {\r\n      sourceLine += segment[2] ?? 0\r\n      sourceFile += segment[1] ?? 0\r\n    })\r\n\r\n    // Return TS file/line number when we reach given JS line number\r\n    if (i + 1 === jsLine) {\r\n      result = sourceLine + 1\r\n      return {\r\n        file: sources[sourceFile],\r\n        line: result,\r\n      }\r\n    }\r\n  }\r\n  throw new Error(`source map failed for line ${jsLine}`)\r\n}\r\n\r\nexport function mapLineToSource(file: string, line: number): SourceLine {\r\n  const map = cachedMaps.get(`${file}`)\r\n  if (map) {\r\n    line -= map.startOffset // Apply start offset\r\n    if (line <= 0) {\r\n      return { file: file, line: line } // Not mapped line\r\n    }\r\n\r\n    const result = mapLineInternal(map, line)\r\n\r\n    if (result.file.startsWith('webpack://test/')) {\r\n      result.file = result.file.replace('webpack://test/', '')\r\n    }\r\n\r\n    if (result.file.startsWith('../')) {\r\n      result.file = result.file.replace('../', './')\r\n    }\r\n\r\n    return result\r\n  } else {\r\n    // Mapping not found, return original JS file and line\r\n    return { file, line }\r\n  }\r\n}\r\n","import { mapLineToSource } from './sourceMap'\r\n\r\nconst Bukkit = Java.type('org.bukkit.Bukkit')\r\nconst MiniMessage = Java.type('net.kyori.adventure.text.minimessage.MiniMessage')\r\n\r\nconst space = '      '\r\nconst javaSourceMethodSkips = [\r\n  'yamjs.Interop.catchError',\r\n  'com.oracle.truffle.polyglot.PolyglotFunctionProxyHandler.invoke',\r\n  'jdk.proxy1.$Proxy75.run',\r\n]\r\nconst jsFileSkips = ['webpack/runtime/make']\r\nconst jsMethodSkips = ['catchAndLogUnhandledErrors']\r\n\r\nconst formatError = (error: any) => {\r\n  const list: string[] = []\r\n\r\n  list.push(error.name)\r\n\r\n  for (let i = 0; i < error.stack.length; i++) {\r\n    const item = error.stack[i]\r\n\r\n    // JAVA\r\n    if (item.javaFrame) {\r\n      if (javaSourceMethodSkips.includes(`${item.source}.${item.methodName}`)) continue\r\n\r\n      list.push(`${space}at ${item.source}.${item.methodName}(${item.fileName}:${item.line})`)\r\n      continue\r\n    }\r\n\r\n    // JAVASCRIPT\r\n    const source = mapLineToSource(item.source, item.line)\r\n\r\n    // - SKIPS\r\n    if (jsFileSkips.some((skip) => source.file.includes(skip))) continue\r\n    if (jsMethodSkips.includes(item.methodName)) continue\r\n    if (source.line === 0) continue\r\n\r\n    let methodName = item.methodName || '<anonymous>'\r\n\r\n    if (item.methodName === ':=>') {\r\n      methodName = '<anonymous>'\r\n    }\r\n\r\n    list.push(\r\n      `${space}at ${methodName} (${source.file}:${source.line}) [${item.source}:${item.line}]`\r\n    )\r\n  }\r\n\r\n  return list.join('\\n')\r\n}\r\n\r\nexport const logError = (error: unknown, msg?: string) => {\r\n  let jsError: any\r\n\r\n  try {\r\n    // @ts-expect-error\r\n    const errorType = error?.getClass?.()?.getName?.() ?? undefined\r\n    if (errorType?.includes('yamjs.JsError')) {\r\n      jsError = error\r\n    } else {\r\n      // @ts-expect-error\r\n      jsError = __interop.catchError(() => {\r\n        throw error\r\n      })\r\n    }\r\n\r\n    const errorMsg = formatError(jsError)\r\n    msg && Bukkit.getConsoleSender().sendMessage(msg)\r\n    Bukkit.getConsoleSender().sendMessage(\r\n      MiniMessage.miniMessage().deserialize(`<red>${errorMsg}</red>`)\r\n    )\r\n  } catch (logError) {\r\n    console.log(\r\n      'ERROR: There was an error logging an error. Please report to YamJS. ',\r\n      logError.name\r\n    )\r\n    console.log(logError.message, logError.stack)\r\n    // @ts-expect-error\r\n    console.log('Original error: ', error?.name)\r\n    // @ts-expect-error\r\n    console.log(error?.message, error?.stack)\r\n  }\r\n}\r\n\r\nexport const catchAndLogUnhandledError = <R>(fn: () => R, msg: string): R | undefined => {\r\n  try {\r\n    return fn()\r\n  } catch (error) {\r\n    logError(error, msg)\r\n  }\r\n}\r\n\r\nexport const asyncCatchAndLogUnhandledError = async <R>(\r\n  fn: () => Promise<R>,\r\n  msg: string\r\n): Promise<R> | undefined => {\r\n  try {\r\n    return await fn()\r\n  } catch (error) {\r\n    logError(error, msg)\r\n  }\r\n}\r\n\r\nexport const createCatchAndLogUnhandledErrorHandler =\r\n  <P extends any[], R>(fn: (...arg: P) => R, msg: string) =>\r\n  (...args: P): R | undefined => {\r\n    try {\r\n      return fn(...args)\r\n    } catch (error) {\r\n      logError(error, msg)\r\n    }\r\n  }\r\n","import { EventPriority, Listener } from 'org.bukkit.event'\r\nimport { bukkitManager, bukkitPlugin } from './bukkit'\r\nimport { catchAndLogUnhandledError } from './errors'\r\n\r\n/** A valid event priority. */\r\ntype StringEventPriority = 'HIGH' | 'HIGHEST' | 'LOW' | 'LOWEST' | 'MONITOR' | 'NORMAL'\r\n\r\nexport const createEventListener = () => new (Java.extend(Listener, {}))() as Listener\r\nexport const MainInstanceListener = createEventListener()\r\n\r\n// @ts-expect-error\r\ntype EventListener<X> = (event: InstanceType<X>) => void\r\ntype ScriptEventListener<X> = {\r\n  // @ts-expect-error\r\n  script: (event: InstanceType<X>) => void\r\n  priority: StringEventPriority\r\n}\r\n\r\nexport type RegisterEventType<Event = any> = <X = Event>(\r\n  eventClass: X,\r\n  eventListenerArg: EventListener<X> | ScriptEventListener<X>,\r\n  priority?: StringEventPriority,\r\n  listener?: Listener\r\n) => void\r\n\r\nexport const registerEvent: RegisterEventType = (\r\n  eventClass,\r\n  eventListenerArg,\r\n  priority = 'HIGHEST',\r\n  listener: Listener = MainInstanceListener\r\n) => {\r\n  const eventListener = {\r\n    priority: 'priority' in eventListenerArg ? eventListenerArg.priority : priority,\r\n    script: 'script' in eventListenerArg ? eventListenerArg.script : eventListenerArg,\r\n  }\r\n\r\n  // @ts-expect-error [java-ts-bind classes missing class prototype methods]\r\n  const name: string = eventClass.class.toString()\r\n\r\n  bukkitManager.registerEvent(\r\n    // @ts-expect-error [java-ts-bind missing class prototype]\r\n    eventClass.class,\r\n    listener,\r\n    EventPriority.valueOf(eventListener.priority),\r\n    // @ts-expect-error [EventExecutor]\r\n    (x: any, signal: any) => {\r\n      // @ts-expect-error [instancetype error]\r\n      if (signal instanceof eventClass) {\r\n        catchAndLogUnhandledError(() => {\r\n          eventListener.script(signal)\r\n        }, `An error occured while attempting to handle the \"${name}\" event!`)\r\n      }\r\n    },\r\n    bukkitPlugin\r\n  )\r\n}\r\n","let isVerboseLoggingEnabled = undefined as boolean | undefined\r\nexport const logVerbose = (...args: any[]) => {\r\n  if (isVerboseLoggingEnabled === undefined) {\r\n    isVerboseLoggingEnabled = Yam.getConfig().verbose\r\n  }\r\n\r\n  if (isVerboseLoggingEnabled) {\r\n    console.log(...args)\r\n  }\r\n}\r\n","import { BukkitTask } from 'org.bukkit.scheduler'\r\nimport { logVerbose } from './util'\r\n\r\ninterface TickContext {\r\n  tick: number\r\n  task: BukkitTask | undefined\r\n  isActive: boolean\r\n  tickFns: ((tick: number) => void)[]\r\n}\r\n\r\nconst Context = Symbol('TickContext')\r\n\r\nconst nextTick = () => {\r\n  const ctx = ticker[Context]\r\n  if (!ctx.isActive) return\r\n\r\n  for (const fn of ctx.tickFns) {\r\n    fn(ctx.tick)\r\n  }\r\n\r\n  if (ctx.tick % 20 === 0) {\r\n    logVerbose('Tick', ctx.tick)\r\n  }\r\n\r\n  ctx.tick += 1\r\n}\r\n\r\nconst createTicker = () => {\r\n  const ctx: TickContext = {\r\n    tick: 0,\r\n    task: undefined,\r\n    isActive: false,\r\n    tickFns: [],\r\n  }\r\n\r\n  const start = () => {\r\n    ctx.isActive = true\r\n    Yam.instance.setTickFn(nextTick)\r\n  }\r\n\r\n  const stop = async () => {\r\n    ctx.isActive = false\r\n    if (ctx.task) ctx.task.cancel()\r\n\r\n    return\r\n  }\r\n\r\n  return {\r\n    [Context]: ctx,\r\n    start,\r\n    stop,\r\n    getTick: () => ctx.tick,\r\n    registerTickFn: (fn: (tick: number) => void) => {\r\n      ctx.tickFns.push(fn)\r\n    },\r\n  }\r\n}\r\n\r\nexport const ticker = createTicker()\r\n","import { Opaque } from 'type-fest'\r\nimport { ticker } from './ticker'\r\n\r\ntype TickerTask = () => void\r\ntype TaskId = Opaque<number, 'TaskId'>\r\ntype Tick = Opaque<number, 'Tick'>\r\ntype TaskObject = {\r\n  baseTick: Tick\r\n  tick: Tick\r\n  fn: TickerTask\r\n  reset: boolean\r\n  id: TaskId\r\n}\r\n\r\nconst isTick = (tick: number): tick is Tick => true\r\nconst isTaskId = (id: number): id is TaskId => true\r\nconst tick = (tick: number | Tick) => tick as Tick\r\nconst taskId = (id: number | TaskId) => id as TaskId\r\n\r\nconst createTickerTasks = () => {\r\n  const context = {\r\n    nextId: 0,\r\n  }\r\n\r\n  const taskIdMap = new Map<TaskId, TaskObject>()\r\n\r\n  const remove = (id: number) => {\r\n    if (!isTaskId(id)) return\r\n\r\n    taskIdMap.delete(id)\r\n  }\r\n\r\n  const add = (\r\n    fn: TickerTask,\r\n    baseTick: number,\r\n    options?: {\r\n      /**\r\n       * Reset the task after it has been run\r\n       *\r\n       * @default false\r\n       */\r\n      reset?: boolean\r\n      nextId?: number\r\n    }\r\n  ) => {\r\n    if (!isTick(baseTick)) return\r\n\r\n    const id = taskId(options?.nextId ?? context.nextId++)\r\n    const targetTick = tick(ticker.getTick() + Math.max(baseTick, 1))\r\n\r\n    // Handle TaskIdMap\r\n    taskIdMap.set(id, {\r\n      baseTick,\r\n      tick: targetTick,\r\n      fn,\r\n      reset: options?.reset || false,\r\n      id,\r\n    })\r\n\r\n    return id\r\n  }\r\n\r\n  const runTask = (task: TaskObject) => {\r\n    taskIdMap.delete(task.id)\r\n    task.fn()\r\n\r\n    if (task.reset) {\r\n      add(task.fn, task.baseTick, { reset: task.reset, nextId: task.id })\r\n    }\r\n  }\r\n\r\n  const run = (tick: number) => {\r\n    if (!isTick(tick)) return\r\n\r\n    for (const [, task] of taskIdMap) {\r\n      if (tick >= task.tick) {\r\n        runTask(task)\r\n      }\r\n    }\r\n  }\r\n\r\n  return {\r\n    add,\r\n    run,\r\n    remove,\r\n    initialize: () => {\r\n      ticker.registerTickFn((tick) => run(tick))\r\n    },\r\n  }\r\n}\r\n\r\nexport const tickerTasks = createTickerTasks()\r\n","import { createCatchAndLogUnhandledErrorHandler } from './errors'\r\nimport { tickerTasks } from './tasks'\r\n\r\nconst baseTimer = (\r\n  callback: () => void,\r\n  delay: number,\r\n  options?: Parameters<typeof tickerTasks['add']>[2]\r\n) => {\r\n  const modifier = delay / 50\r\n\r\n  return tickerTasks.add(\r\n    createCatchAndLogUnhandledErrorHandler(callback, 'Unhandled timer'),\r\n    modifier,\r\n    options\r\n  )\r\n}\r\n\r\nconst setTimeout = (callback: () => void, delay: number) => baseTimer(callback, delay)\r\nconst setInterval = (callback: () => void, delay: number) =>\r\n  baseTimer(callback, delay, {\r\n    reset: true,\r\n  })\r\n\r\nconst setImmediate = (callback: () => void) => setTimeout(callback, 0)\r\n\r\nconst clearTimeout = (id: number) => tickerTasks.remove(id)\r\n\r\nexport const initializeTimers = () => {\r\n  // @ts-expect-error\r\n  globalThis.setTimeout = setTimeout\r\n  // @ts-expect-error\r\n  globalThis.setInterval = setInterval\r\n  // @ts-expect-error\r\n  globalThis.setImmediate = setImmediate\r\n  // @ts-ignore\r\n  globalThis.clearTimeout = clearTimeout\r\n  // @ts-ignore\r\n  globalThis.clearInterval = clearTimeout\r\n}\r\n","import { asyncCatchAndLogUnhandledError, catchAndLogUnhandledError } from './errors'\r\nimport { logVerbose } from './util'\r\n\r\ntype Hook = {\r\n  name?: string\r\n  hook: HookCallback\r\n\r\n  /**\r\n   * Allows to control the order of execution.\r\n   * Lower number means earlier execution.\r\n   * Higher number means later execution.\r\n   *\r\n   * Default is 3.\r\n   */\r\n  priority?: 1 | 2 | 3 | 4 | 5\r\n}\r\nexport type HookCallback = () => void\r\n\r\ntype HookId = string\r\ntype HookUnref = () => void\r\n// TODO: 'onEnable' doesn't work\r\ntype LifecycleTypes = 'onDisable' | 'onEnable'\r\n\r\nexport const __INTERNAL_LIFECYCLE = Symbol('lifecycle')\r\n\r\nconst createLifecycleHandler = () => {\r\n  const hooks = new Map<LifecycleTypes, Map<HookId, Hook>>()\r\n  let nextId = 0\r\n  let isReloading = false\r\n\r\n  const executeHooks = async (type: LifecycleTypes) => {\r\n    const group = hooks.get(type)\r\n\r\n    for (let i = 1; i <= 5; i++) {\r\n      const priorityHooks = [...group.values()].filter((hook) => hook.priority === i)\r\n      for (const { hook, name } of priorityHooks) {\r\n        name && console.log(`${type === 'onEnable' ? 'Enabling' : 'Disabling'} ${name}`)\r\n\r\n        await asyncCatchAndLogUnhandledError(\r\n          async () => await hook?.(),\r\n          `Error while executing ${type} hook`\r\n        )\r\n      }\r\n    }\r\n\r\n    hooks.delete(type)\r\n  }\r\n\r\n  Yam.instance.setOnCloseFn(async () => {\r\n    await executeHooks('onDisable')\r\n  })\r\n\r\n  return {\r\n    [__INTERNAL_LIFECYCLE]: {\r\n      executeHooks,\r\n    },\r\n\r\n    reload: async () => {\r\n      logVerbose('Reloading YamJS')\r\n      isReloading = true\r\n\r\n      await executeHooks('onDisable')\r\n\r\n      Yam.reload()\r\n\r\n      logVerbose('Finished reloading YamJS')\r\n      isReloading = false\r\n    },\r\n\r\n    register: (name: LifecycleTypes, hook: Hook): HookUnref => {\r\n      const id = nextId++\r\n\r\n      const callbacks = hooks.get(name) ?? new Map()\r\n      callbacks.set(id, { priority: 3, ...hook })\r\n      hooks.set(name, callbacks)\r\n\r\n      return () => delete callbacks[id]\r\n    },\r\n  }\r\n}\r\n\r\nexport const lifecycle = createLifecycleHandler()\r\n","import { logError } from './errors'\r\nimport { MainInstanceListener } from './registerEvent'\r\nimport { tickerTasks } from './tasks'\r\nimport { ticker } from './ticker'\r\nimport { initializeTimers } from './timers'\r\nimport { HandlerList } from 'org.bukkit.event'\r\nimport { bukkitPlugin } from './bukkit'\r\nimport { lifecycle, __INTERNAL_LIFECYCLE } from './lifecycle'\r\n\r\nlet isInitialized = false\r\n\r\nexport const initialize = () => {\r\n  if (isInitialized) return\r\n\r\n  ticker.start()\r\n  tickerTasks.initialize()\r\n  initializeTimers()\r\n\r\n  Yam.instance.setLoggerFn((error) => logError(error))\r\n\r\n  // TODO: Validate\r\n  if (Yam.getMeta() === 'yamjs') {\r\n    // Driver instance should unregister all listeners\r\n    lifecycle.register('onDisable', {\r\n      name: 'Event Listeners',\r\n      hook: () => {\r\n        HandlerList.unregisterAll(bukkitPlugin)\r\n      },\r\n      priority: 5,\r\n    })\r\n  } else {\r\n    // Context instance should unregister only its own listeners\r\n    lifecycle.register('onDisable', {\r\n      name: 'Context Event Listeners',\r\n      hook: () => {\r\n        HandlerList.unregisterAll(MainInstanceListener)\r\n      },\r\n      priority: 5,\r\n    })\r\n  }\r\n\r\n  // TODO: 'onEnable' doesn't work\r\n  lifecycle[__INTERNAL_LIFECYCLE].executeHooks('onEnable')\r\n\r\n  isInitialized = true\r\n}\r\n\r\nif (Yam.getConfig().initialize) {\r\n  initialize()\r\n}\r\n","export type { YamApi, YamConfig, YamInstance } from './types/yamApi'\r\nexport type { Java, Polyglot } from './types/global'\r\n\r\nexport { bukkitManager, bukkitPlugin, bukkitServer } from './bukkit'\r\nexport { getDebugInfo } from './debug'\r\nexport { logError, catchAndLogUnhandledError } from './errors'\r\nexport { registerEvent, createEventListener, type RegisterEventType } from './registerEvent'\r\nexport { cacheSourceMap } from './sourceMap'\r\nexport { initialize } from './initialize'\r\nexport { lifecycle } from './lifecycle'\r\n","import { bukkitManager, bukkitPlugin, bukkitServer, catchAndLogUnhandledError } from '@yam-js/core'\r\n\r\ntype jiFile = any\r\ntype jiInputStream = any\r\ntype ogpContext = any\r\ntype juLinkedList<T> = any\r\ntype Yam = any\r\n\r\n// @ts-expect-error\r\nconst Yam = globalThis.Yam\r\nconst Core = Yam\r\n\r\n/** A serializable object. */\r\nexport type basic =\r\n  | { [x in string]: basic }\r\n  | basic[]\r\n  | string\r\n  | number\r\n  | boolean\r\n  | null\r\n  | undefined\r\n  | void\r\n\r\n/** A pending task. */\r\nexport type future = { tick: number; args: any[]; script: Function }\r\n\r\n/** A Yam context instance. */\r\nexport type instance = {\r\n  context: ogpContext\r\n  hooks: { list: juLinkedList<Function>; release(): void }\r\n  messages: juLinkedList<{ channel: string; content: string }>\r\n  meta: string\r\n  root: string\r\n  tasks: { list: juLinkedList<Function>; release(): void }\r\n  close(): void\r\n  destroy(): void\r\n  execute(): void\r\n  open(): void\r\n  tick(): void\r\n}\r\n\r\n/** File system utilities for a specific path. */\r\nexport type record = {\r\n  /** Returns an array of modifiers for the contents of the folder (if any) at the current path. */\r\n  readonly children: record[]\r\n  /** Creates a folder at the current path if no file or folder already exists there. */\r\n  directory(): record\r\n  /** Creates a file at the current path if no file or folder already exists there. */\r\n  entry(): record\r\n  /** Whether a file or folder exists at the current path or not. */\r\n  readonly exists: boolean\r\n  /** Joins the current path and the given sub-path, and returns a new modifier for it. */\r\n  file(...sub: string[]): record\r\n  /** Starting from the current path, removes parent folders upstream until a parent folder is non-empty. */\r\n  flush(): record\r\n  /** The java file for the current path. */\r\n  io: jiFile\r\n  /** Synchronously parses the JSON content (if any) of the file at the current path. */\r\n  json(async?: false): any\r\n  /** Parses the JSON content (if any) of the file at the current path. */\r\n  json(async: true): Promise<any>\r\n  /** The name of the current path. */\r\n  readonly name: string\r\n  /** The current path. */\r\n  readonly path: string\r\n  /** The record for the parent folder of the current path. */\r\n  readonly parent: record\r\n  /** Synchronously returns the content (if any) of the file at the current path. */\r\n  read(async?: false): string\r\n  /** Returns the content (if any) of the file at the current path. */\r\n  read(async: true): Promise<string>\r\n  /** Removes and flushes the file or folder (if any) at the current path. */\r\n  remove(): record\r\n  /** Whether the current path represents a folder, a file, or none of the above. */\r\n  readonly type: 'folder' | 'file' | 'none'\r\n  /** Synchronously writes the given content to the file (if any) at the current path. */\r\n  write(content: string, async?: false): record\r\n  /** Writes the given content to the file (if any) at the current path. */\r\n  write(content: string, async: true): Promise<record>\r\n}\r\n\r\n/** A web response. */\r\nexport type response = {\r\n  /** Synchronously parses the JSON content (if any) of the response. */\r\n  json(async?: false): any\r\n  /** Parses the JSON content (if any) of the response. */\r\n  json(async: true): Promise<any>\r\n  /** Synchronously returns the content (if any) of the response. */\r\n  read(async?: false): string\r\n  /** Returns the content (if any) of the response. */\r\n  read(async: true): Promise<string>\r\n  /** Returns the response stream. */\r\n  stream(): jiInputStream\r\n}\r\n\r\nif ('Yam' in globalThis) {\r\n  Object.assign(globalThis, { Core: Yam })\r\n} else if ('Core' in globalThis) {\r\n  Object.assign(globalThis, { Yam: Core })\r\n} else if ('Polyglot' in globalThis) {\r\n  throw 'YamJS was not detected (or is very outdated) in your environment!'\r\n} else if ('Java' in globalThis) {\r\n  throw 'GraalJS was not detected in your environment!'\r\n} else {\r\n  throw 'Java was not detected in your environment!'\r\n}\r\n\r\n/** A session container for this module. */\r\nexport const session = {\r\n  data: new Map<string, any>(),\r\n  load: new Map<string, any>(),\r\n  poly: { index: 0, list: new Map<number, future>() },\r\n  task: { list: new Set<future>(), tick: 0 },\r\n}\r\n\r\nconst Files = Java.type('java.nio.file.Files')\r\nconst JavaString = Java.type('java.lang.String')\r\nconst Paths = Java.type('java.nio.file.Paths')\r\nconst Pattern = Java.type('java.util.regex.Pattern')\r\nconst Scanner = Java.type('java.util.Scanner')\r\nconst URL = Java.type('java.net.URL')\r\nconst UUID = Java.type('java.util.UUID')\r\n\r\n/** A system which simplifies asynchronous cross-context code execution. */\r\nexport const desync = {\r\n  /** Provides the result to a desync request within an auxilliary file. If this method is called while not within a desync-compatible context, it will fail. */\r\n  async provide(provider: (data: basic) => basic | Promise<basic>) {\r\n    try {\r\n      const { data, uuid } = JSON.parse(context.meta)\r\n      try {\r\n        context.emit(uuid, JSON.stringify({ data: await provider(data), status: true }))\r\n      } catch (error) {\r\n        context.emit(uuid, JSON.stringify({ data: error, status: false }))\r\n      }\r\n    } catch (error) {\r\n      throw \"The current context's metadata is incompatible with the desync system!\"\r\n    }\r\n  },\r\n  /** Sends a desync request to another file. If said file has a valid desync provider, that provider will be triggered and a response will be sent back when ready. */\r\n  async request(path: string | record | jiFile, data: basic = {}) {\r\n    const script = file(path)\r\n    if (script.exists) {\r\n      const uuid = UUID.randomUUID().toString()\r\n      const promise = context.on(uuid)\r\n      context.create('file', file(path).io.getAbsolutePath(), JSON.stringify({ data, uuid })).open()\r\n      const response = JSON.parse(await promise)\r\n      if (response.status) return response.data as basic\r\n      else throw response.data\r\n    } else {\r\n      throw 'That file does not exist!'\r\n    }\r\n  },\r\n  /** Runs a task off the main server thread. */\r\n  shift<X>(script: (...args: any[]) => X | Promise<X>) {\r\n    switch (env.name) {\r\n      case 'bukkit':\r\n        return new Promise<X>((resolve, reject) => {\r\n          env.content.server.getScheduler().runTaskAsynchronously(\r\n            env.content.plugin,\r\n            // @ts-expect-error\r\n            new env.content.Runnable(async () => {\r\n              try {\r\n                resolve(await script())\r\n              } catch (error) {\r\n                reject(error)\r\n              }\r\n            })\r\n          )\r\n        })\r\n      case 'minestom':\r\n        return new Promise<X>(async (resolve, reject) => {\r\n          try {\r\n            resolve(await script())\r\n          } catch (error) {\r\n            reject(error)\r\n          }\r\n        })\r\n    }\r\n  },\r\n}\r\n\r\n/** It's even more complicated. */\r\nexport function chain<\r\n  A,\r\n  B extends (input: A, loop: (input: A) => C) => any,\r\n  C extends ReturnType<B>\r\n>(input: A, handler: B): C {\r\n  const loop = (input: A): C => {\r\n    try {\r\n      return handler(input, loop)\r\n    } catch (error) {\r\n      throw error\r\n    }\r\n  }\r\n  return loop(input)\r\n}\r\n\r\n/** Registers a custom command to the server. */\r\nexport function command(options: {\r\n  name: string\r\n  message?: string\r\n  aliases?: string[]\r\n  execute?: (sender: any, ...args: string[]) => void\r\n  namespace?: string\r\n  permission?: string\r\n  tabComplete?: (sender: any, ...args: string[]) => string[]\r\n}) {\r\n  switch (env.name) {\r\n    case 'bukkit': {\r\n      // @ts-expect-error\r\n      env.content.plugin.register(\r\n        options.namespace || env.content.plugin.getName(),\r\n        options.name,\r\n        options.aliases || [],\r\n        options.permission || '',\r\n        options.message || '',\r\n        (sender: any, label: string, args: string[]) => {\r\n          catchAndLogUnhandledError(() => {\r\n            if (!options.permission || sender.hasPermission(options.permission)) {\r\n              options.execute && options.execute(sender, ...args)\r\n            } else {\r\n              sender.sendMessage(options.message || '')\r\n            }\r\n          }, `An error occured while attempting to execute the \"${label}\" command!`)\r\n        },\r\n        (sender: any, alias: string, args: string[]) => {\r\n          return (\r\n            catchAndLogUnhandledError(\r\n              () => (options.tabComplete && options.tabComplete(sender, ...args)) || [],\r\n              `An error occured while attempting to tab-complete the \"${alias}\" command!`\r\n            ) ?? []\r\n          )\r\n        }\r\n      )\r\n      break\r\n    }\r\n    case 'minestom': {\r\n      const command = new env.content.Command(options.name)\r\n      command.addSyntax(\r\n        (sender, context) => {\r\n          try {\r\n            options.execute && options.execute(sender, ...context.getInput().split(' ').slice(1))\r\n          } catch (error) {\r\n            console.error(\r\n              `An error occured while attempting to execute the \"${options.name}\" command!`\r\n            )\r\n            console.error(error.stack || error.message || error)\r\n          }\r\n        },\r\n        env.content.ArgumentType.StringArray('tab-complete').setSuggestionCallback(\r\n          (sender, context, suggestion) => {\r\n            for (const completion of options.tabComplete(\r\n              sender,\r\n              ...context.getInput().split(' ').slice(1)\r\n            ) || []) {\r\n              suggestion.addEntry(new env.content.SuggestionEntry(completion))\r\n            }\r\n          }\r\n        )\r\n      )\r\n      env.content.registry.register(command)\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n * A simple task scheduler.\r\n * @deprecated\r\n */\r\nexport const task = {\r\n  /** Cancels a previously scheduled task. */\r\n  cancel(handle: future) {\r\n    session.task.list.delete(handle)\r\n  },\r\n  /** Schedules a task to run infinitely at a set interval. */\r\n  interval(script: Function, period = 0, ...args: any[]) {\r\n    const future = task.timeout(\r\n      (...args: any[]) => {\r\n        try {\r\n          future.tick += Math.ceil(period < 1 ? 1 : period)\r\n          script(...args)\r\n        } catch (err) {\r\n          console.error('future task interval error', err)\r\n        }\r\n      },\r\n      0,\r\n      ...args\r\n    )\r\n    return future\r\n  },\r\n  /** Schedules a task to run after a set timeout. */\r\n  timeout(script: Function, period = 0, ...args: any[]) {\r\n    const future = {\r\n      tick: session.task.tick + Math.ceil(period < 0 ? 0 : period),\r\n      args,\r\n      script: (...args) => {\r\n        try {\r\n          script(...args)\r\n        } catch (err) {\r\n          console.error('future task timeout error', err)\r\n        }\r\n      },\r\n    }\r\n    session.task.list.add(future)\r\n    return future\r\n  },\r\n}\r\n\r\nexport const context = {\r\n  /** Creates a new context and returns its instance. If `type` is file, `content` refers to a JS file path relative to the JS root folder. If `type` is script, `content` refers to a piece of JS code. */\r\n  create<X extends 'file' | 'script'>(\r\n    type: X,\r\n    content: string,\r\n    meta?: string\r\n  ): { file: instance & { main: string }; script: instance & { code: string } }[X] {\r\n    return Yam[`${type}Instance`](content, meta)\r\n  },\r\n  /** Destroys the currently running context. */\r\n  destroy() {\r\n    Yam.destroy()\r\n  },\r\n  emit(channel: string, message: string) {\r\n    Yam.emit(channel, message)\r\n  },\r\n  meta: Yam.getMeta(),\r\n  off(channel: string, listener: (data: string) => void) {\r\n    return Yam.off(channel, listener)\r\n  },\r\n  on: ((channel: string, listener?: (data: string) => void) => {\r\n    if (listener) {\r\n      return Yam.on(channel, listener)\r\n    } else {\r\n      return new Promise((resolve) => {\r\n        const dummy = (response: string) => {\r\n          context.off(channel, dummy)\r\n          resolve(response)\r\n        }\r\n        context.on(channel, dummy)\r\n      })\r\n    }\r\n  }) as {\r\n    (channel: string): Promise<string>\r\n    (channel: string, listener: (data: string) => void)\r\n  },\r\n  swap() {\r\n    push(Yam.swap)\r\n  },\r\n}\r\n\r\n/** Stores data on a per-path basis. */\r\nexport function data(path: string, ...more: string[]) {\r\n  const name = Paths.get(path, ...more)\r\n    .normalize()\r\n    .toString()\r\n  if (session.data.has(name)) {\r\n    return session.data.get(name)\r\n  } else {\r\n    const value = file(root, 'data', `${name}.json`).json() || {}\r\n    session.data.set(name, value)\r\n    return value\r\n  }\r\n}\r\n\r\n/** The environment that this module is currently running in. */\r\nexport const env = (() => {\r\n  try {\r\n    return {\r\n      content: {\r\n        manager: bukkitManager,\r\n        plugin: bukkitPlugin,\r\n        Runnable: Java.type('java.lang.Runnable'),\r\n        server: bukkitServer,\r\n      },\r\n      name: 'bukkit',\r\n    }\r\n  } catch (error) {\r\n    try {\r\n      const MinecraftServer: any = Java.type('net.minestom.server.MinecraftServer')\r\n\r\n      /* minestom detected */\r\n\r\n      const manager = MinecraftServer.getExtensionManager()\r\n      const extension = manager.getExtension('Yam')\r\n\r\n      return {\r\n        content: {\r\n          ArgumentType: Java.type(\r\n            'net.minestom.server.command.builder.arguments.ArgumentType'\r\n          ) as any,\r\n          Command: Java.type('net.minestom.server.command.builder.Command') as any,\r\n          extension,\r\n          manager,\r\n          node: extension.getEventNode(),\r\n          registry: MinecraftServer.getCommandManager(),\r\n          server: MinecraftServer,\r\n          SuggestionEntry: Java.type(\r\n            'net.minestom.server.command.builder.suggestion.SuggestionEntry'\r\n          ) as any,\r\n        },\r\n        name: 'minestom',\r\n      }\r\n    } catch (error) {\r\n      return { name: 'unknown', content: {} }\r\n    }\r\n  }\r\n})()\r\n\r\n/** Sends a GET request to the given URL. */\r\nexport function fetch(link: string) {\r\n  const response: response = {\r\n    json(async?: boolean) {\r\n      if (async) {\r\n        return response.read(true).then((content) => JSON.parse(content))\r\n      } else {\r\n        try {\r\n          return JSON.parse(response.read())\r\n        } catch (error) {\r\n          throw error\r\n        }\r\n      }\r\n    },\r\n    // @ts-expect-error\r\n    read(async?: boolean) {\r\n      if (async) {\r\n        return desync.request(aux, { link, operation: 'fetch.read' }) as Promise<string>\r\n      } else {\r\n        return new Scanner(response.stream()).useDelimiter('\\\\A').next()\r\n      }\r\n    },\r\n    stream() {\r\n      return new URL(link).openStream()\r\n    },\r\n  }\r\n  return response\r\n}\r\n\r\n/** A utility wrapper for paths and files. */\r\nexport function file(path: string | record | jiFile, ...more: string[]) {\r\n  path = typeof path === 'string' ? path : 'io' in path ? path.path : path.getPath()\r\n  const io = Paths.get(path, ...more)\r\n    .normalize()\r\n    .toFile()\r\n  const record: record = {\r\n    get children() {\r\n      return record.type === 'folder' ? [...io.listFiles()].map((sub) => file(sub.getPath())) : null\r\n    },\r\n    directory() {\r\n      if (record.type === 'none') {\r\n        chain(io, (io, loop) => {\r\n          const parent = io.getParentFile()\r\n          parent && (parent.exists() || loop(parent))\r\n          io.mkdir()\r\n        })\r\n      }\r\n      return record\r\n    },\r\n    entry() {\r\n      record.type === 'none' && record.parent.directory() && io.createNewFile()\r\n      return record\r\n    },\r\n    get exists() {\r\n      return io.exists()\r\n    },\r\n    file(...path) {\r\n      return file(io, ...path)\r\n    },\r\n    flush() {\r\n      chain(io, (io, loop) => {\r\n        const parent = io.getParentFile()\r\n        parent &&\r\n          parent.isDirectory() &&\r\n          (parent.listFiles()[0] || (parent.delete() && loop(parent)))\r\n      })\r\n      return record\r\n    },\r\n    io,\r\n    json(async?: boolean) {\r\n      if (async) {\r\n        return record.read(true).then((content) => JSON.parse(content))\r\n      } else {\r\n        try {\r\n          return JSON.parse(record.read())\r\n        } catch (error) {\r\n          return null\r\n        }\r\n      }\r\n    },\r\n    get name() {\r\n      return io.getName()\r\n    },\r\n    get parent() {\r\n      return record.file('..')\r\n    },\r\n    get path() {\r\n      return regex.replace(io.getPath(), '(\\\\\\\\)', '/')\r\n    },\r\n    read(async?: boolean) {\r\n      if (async) {\r\n        return desync.request(aux, { operation: 'file.read', path: record.path }) as Promise<string>\r\n      } else {\r\n        return record.type === 'file'\r\n          ? new JavaString(Files.readAllBytes(io.toPath())).toString()\r\n          : null\r\n      }\r\n    },\r\n    remove() {\r\n      chain(io, (io, loop) => {\r\n        io.isDirectory() && [...io.listFiles()].forEach(loop)\r\n        io.exists() && io.delete()\r\n      })\r\n      return record.flush()\r\n    },\r\n    get type() {\r\n      return io.isDirectory() ? 'folder' : io.exists() ? 'file' : 'none'\r\n    },\r\n    //@ts-expect-error\r\n    write(content: string, async?: boolean) {\r\n      if (async) {\r\n        return desync\r\n          .request(aux, { content, operation: 'file.write', path: record.path })\r\n          .then(() => record)\r\n      } else {\r\n        record.type === 'file' && Files.write(io.toPath(), new JavaString(content).getBytes())\r\n        return record\r\n      }\r\n    },\r\n  }\r\n  return record\r\n}\r\n\r\n/** Imports classes from external files.123 */\r\nexport function load<T>(path: string | record | jiFile, name: string): T {\r\n  if (session.load.has(name)) {\r\n    return session.load.get(name)\r\n  } else {\r\n    const source = file(path)\r\n    if (source.exists) {\r\n      const value = Yam.load(source.io, name)\r\n      session.load.set(name, value)\r\n      return value\r\n    } else {\r\n      throw new ReferenceError(`The file \"${source.path}\" does not exist!`)\r\n    }\r\n  }\r\n}\r\n\r\n/** Runs a script on the next tick. */\r\nexport function push(script: Function) {\r\n  Yam.push(script)\r\n}\r\n\r\n/** Tools for using regex patterns. */\r\nexport const regex = {\r\n  test(input: string, expression: string) {\r\n    //@ts-expect-error\r\n    return input.matches(expression)\r\n  },\r\n  replace(input: string, expression: string, replacement: string) {\r\n    // @ts-expect-error\r\n    return Pattern.compile(expression).matcher(input).replaceAll(replacement)\r\n  },\r\n}\r\n\r\n/** Reloads the JS environment. */\r\nexport function reload() {\r\n  push(Yam.reload || Yam.swap)\r\n}\r\n\r\n/** The root folder of the environment. */\r\nexport const root = file(Yam.getRoot())\r\n\r\n/** Recursively removes or replaces the circular references in an object. */\r\nexport function simplify(object: any, placeholder?: any, objects?: Set<any>) {\r\n  if (object && typeof object === 'object') {\r\n    objects || (objects = new Set())\r\n    if (objects.has(object)) {\r\n      return placeholder\r\n    } else {\r\n      objects.add(object)\r\n      const output = typeof object[Symbol.iterator] === 'function' ? [] : {}\r\n      for (const key in object) output[key] = simplify(object[key], placeholder, new Set(objects))\r\n      return output\r\n    }\r\n  } else {\r\n    return object\r\n  }\r\n}\r\n\r\nexport function sync<X>(script: (...args: any[]) => Promise<X>): Promise<X> {\r\n  return new Promise((resolve, reject) => {\r\n    Yam.sync(() => script().then(resolve).catch(reject))\r\n  })\r\n}\r\n\r\nYam.hook(() => {\r\n  for (const [name] of session.data) {\r\n    file(root, 'data', `${name}.json`)\r\n      .entry()\r\n      .write(JSON.stringify(simplify(session.data.get(name))))\r\n  }\r\n})\r\n\r\nconst aux = `${__dirname}/async.js`\r\nconst charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\r\nconst promise = Promise.resolve()\r\n\r\nObject.assign(globalThis, {\r\n  atob(data: string) {\r\n    var str = regex.replace(String(data), '[=]+$', '')\r\n    if (str.length % 4 === 1) {\r\n      throw new Error(\"'atob' failed: The string to be decoded is not correctly encoded.\")\r\n    }\r\n    for (\r\n      var bc = 0, bs, buffer, idx = 0, output = '';\r\n      (buffer = str.charAt(idx++));\r\n      ~buffer && ((bs = bc % 4 ? bs * 64 + buffer : buffer), bc++ % 4)\r\n        ? (output += String.fromCharCode(255 & (bs >> ((-2 * bc) & 6))))\r\n        : 0\r\n    ) {\r\n      buffer = charset.indexOf(buffer)\r\n    }\r\n    return output\r\n  },\r\n  btoa(data: string) {\r\n    var str = String(data)\r\n    for (\r\n      var block, charCode, idx = 0, map = charset, output = '';\r\n      str.charAt(idx | 0) || ((map = '='), idx % 1);\r\n      output += map.charAt(63 & (block >> (8 - (idx % 1) * 8)))\r\n    ) {\r\n      charCode = str.charCodeAt((idx += 3 / 4))\r\n      if (charCode > 0xff) {\r\n        throw new Error(\r\n          \"'btoa' failed: The string to be encoded contains characters outside of the Latin1 range.\"\r\n        )\r\n      }\r\n      block = (block << 8) | charCode\r\n    }\r\n    return output\r\n  },\r\n  queueMicrotask(callback: () => void) {\r\n    promise.then(callback).catch((error) => {\r\n      task.timeout(() => {\r\n        throw error\r\n      })\r\n    })\r\n  },\r\n})\r\n","import { command, env, regex } from '../stdlib'\r\n\r\nconst Class = Java.type('java.lang.Class')\r\nconst Iterable = Java.type('java.lang.Iterable')\r\nconst Iterator = Java.type('java.util.Iterator')\r\nconst Spliterator = Java.type('java.util.Spliterator')\r\n\r\n/** Converts array-like objects or iterators into arrays. */\r\nexport function array(object: any): any[] | null {\r\n  if (object instanceof Array) {\r\n    return [...object]\r\n  } else if (object instanceof Iterable) {\r\n    const output: any[] = []\r\n    // @ts-expect-error\r\n    object.forEach((value: any) => {\r\n      output.push(value)\r\n    })\r\n    return output\r\n  } else if (object instanceof Iterator || object instanceof Spliterator) {\r\n    const output: any[] = []\r\n    // @ts-expect-error\r\n    object.forEachRemaining((value: any) => {\r\n      output.push(value)\r\n    })\r\n    return output\r\n  } else {\r\n    return null\r\n  }\r\n}\r\n\r\n/** Internal value used to represent circular object references in formatted output. */\r\nexport const circular = Symbol()\r\n\r\n/** Formatting tools for script feedback. */\r\nexport const format = {\r\n  /** Reformats complex error messages into layman-friendly ones. */\r\n  error(error: any) {\r\n    let type = 'Error'\r\n    let message = `${error}`\r\n    if (error.stack) {\r\n      type = error.stack.split('\\n')[0].split(' ')[0].slice(0, -1)\r\n      message = error.message\r\n      switch (type) {\r\n        case 'TypeError':\r\n          try {\r\n            if (\r\n              message.startsWith('invokeMember') ||\r\n              message.startsWith('execute on foreign object')\r\n            ) {\r\n              const reason = message.split('failed due to: ')[1]\r\n              if (reason.startsWith('no applicable overload found')) {\r\n                const sets = reason\r\n                  .split('overloads:')[1]\r\n                  .split(']],')[0]\r\n                  .split(')]')\r\n                  .map((set) => {\r\n                    return `(${set.split('(').slice(1).join('(')})`\r\n                  })\r\n                message = ['Invalid arguments! Expected:', ...sets].join('\\n -> ').slice(0, -1)\r\n              } else if (reason.startsWith('Arity error')) {\r\n                message = `Invalid argument amount! Expected: ${reason.split('-')[1].split(' ')[2]}`\r\n              } else if (reason.startsWith('UnsupportedTypeException')) {\r\n                message = 'Invalid arguments!'\r\n              } else if (reason.startsWith('Unknown identifier')) {\r\n                message = `That method (${reason.split(': ')[1]}) does not exist!`\r\n              } else if (reason.startsWith('Message not supported')) {\r\n                message = `That method (${message.slice(14).split(')')[0]}) does not exist!`\r\n              } else {\r\n                message = message.split('\\n')[0]\r\n              }\r\n            }\r\n          } catch (error) {\r\n            message = message.split('\\n')[0]\r\n          }\r\n          break\r\n        case 'SyntaxError':\r\n          message = message.split(' ').slice(1).join(' ').split('\\n')[0]\r\n      }\r\n    } else {\r\n      error = `${error}`\r\n      type = error.split(' ')[0].slice(0, -1)\r\n      message = error.split(' ').slice(1).join(' ')\r\n    }\r\n    return `${type}: ${message}`\r\n  },\r\n  /** A pretty-printer for JavaScript objects. */\r\n  output(object: any, condense?: boolean): string {\r\n    if (condense === true) {\r\n      if (object === circular) {\r\n        return '...'\r\n      } else {\r\n        // @ts-expect-error\r\n        const type = toString.call(object)\r\n        switch (type) {\r\n          case '[object Array]':\r\n          case '[object Object]':\r\n          case '[object Function]':\r\n            return type.split(' ')[1].slice(0, -1)\r\n          case '[foreign HostObject]':\r\n            if (object instanceof Class && typeof object.getCanonicalName === 'function') {\r\n              return object.getCanonicalName()\r\n            } else if (typeof object.toString === 'function') {\r\n              const string = object.toString()\r\n              if (string) {\r\n                return string\r\n              }\r\n            }\r\n            const clazz = typeof object.getClass === 'function' ? object.getClass() : object.class\r\n            if (clazz instanceof Class && typeof clazz.getCanonicalName === 'function') {\r\n              return clazz.getCanonicalName()\r\n            } else {\r\n              return `${object}` || `${clazz}` || 'Object'\r\n            }\r\n          case '[foreign HostFunction]':\r\n            return 'Function'\r\n          default:\r\n            switch (typeof object) {\r\n              case 'bigint':\r\n                return object.toString() + 'n'\r\n              case 'function':\r\n                return 'Function'\r\n              case 'object':\r\n                return object ? 'Object' : 'null'\r\n              case 'symbol':\r\n                return `<${object.toString().slice(7, -1)}>`\r\n              case 'undefined':\r\n                return 'undefined'\r\n              default:\r\n                return JSON.stringify(object)\r\n            }\r\n        }\r\n      }\r\n    } else {\r\n      // @ts-expect-error\r\n      switch (toString.call(object)) {\r\n        case '[object Array]':\r\n          return `[ ${[...object]\r\n            .map((value: any) => format.output(object === value ? circular : value, true))\r\n            .join(', ')} ]`\r\n        case '[object Object]':\r\n          return `{ ${[\r\n            ...Object.getOwnPropertyNames(object).map((key) => {\r\n              return `${key}: ${format.output(\r\n                object === object[key] ? circular : object[key],\r\n                true\r\n              )}`\r\n            }),\r\n            ...Object.getOwnPropertySymbols(object).map((key) => {\r\n              return `${format.output(key, true)}: ${format.output(\r\n                object === object[key] ? circular : object[key],\r\n                true\r\n              )}`\r\n            }),\r\n          ].join(', ')} }`\r\n        case '[object Function]':\r\n          if (object instanceof Class && typeof object.getCanonicalName === 'function') {\r\n            return object.getCanonicalName()\r\n          } else if (typeof object.toString === 'function') {\r\n            return regex.replace(object.toString(), '\\\\r', '')\r\n          } else {\r\n            return `${object}` || 'function () { [native code] }'\r\n          }\r\n        case '[foreign HostFunction]':\r\n          return 'hostFunction () { [native code] }'\r\n        default:\r\n          const list = array(object)\r\n          if (list) {\r\n            return format.output(list)\r\n          } else {\r\n            return format.output(object, true)\r\n          }\r\n      }\r\n    }\r\n  },\r\n}\r\n\r\ncommand({\r\n  name: 'js',\r\n  permission: 'grakkit.command.js',\r\n  message: `\\xa7cYou do not have the required permission to run this command!`,\r\n  execute(context, ...args) {\r\n    const self = globalThis.hasOwnProperty('self')\r\n    // @ts-ignore - Investigate. Why is this a thing?\r\n    self || (globalThis.self = context)\r\n    let output: string\r\n    try {\r\n      const result = Polyglot.eval('js', args.join(' '))\r\n      // @ts-ignore - Investigate. Why is this a thing?\r\n      self || delete globalThis.self\r\n      output = format.output(result)\r\n    } catch (whoops) {\r\n      // @ts-ignore - Investigate. Why is this a thing?\r\n      self || delete globalThis.self\r\n      output = format.error(whoops)\r\n    }\r\n    switch (env.name) {\r\n      case 'bukkit':\r\n        context.sendMessage(output)\r\n        break\r\n      case 'minestom':\r\n        context.sendMessage(output)\r\n        break\r\n    }\r\n  },\r\n  tabComplete(context, ...args) {\r\n    let body = ''\r\n    let index = -1\r\n    let scope: any = globalThis\r\n    let valid = true\r\n    let string: boolean | string = false\r\n    let bracket: boolean | number | string = false\r\n    let comment = false\r\n    let property = ''\r\n    const input = args.join(' ')\r\n    while (valid && ++index < input.length) {\r\n      const char = input[index]\r\n      if (comment) {\r\n        if (char === '*' && input[index + 1] === '/') {\r\n          if (property) {\r\n            input[index + 2] === ';' && (comment = false)\r\n          } else {\r\n            body = input.slice(0, index + 2)\r\n            comment = false\r\n          }\r\n        }\r\n      } else if (string) {\r\n        if (char === '\\\\') {\r\n          ++index\r\n        } else if (char === string) {\r\n          scope = {}\r\n          string = false\r\n        }\r\n      } else if (bracket === true) {\r\n        ;[\"'\", '\"', '`'].includes(char) ? (bracket = char) : (valid = false)\r\n      } else if (typeof bracket === 'string') {\r\n        switch (char) {\r\n          case '\\\\':\r\n            ++index\r\n            break\r\n          case bracket:\r\n            bracket = -1\r\n            break\r\n          default:\r\n            property += char\r\n        }\r\n      } else {\r\n        switch (char) {\r\n          case '/':\r\n            switch (input[index + 1]) {\r\n              case '/':\r\n                valid = false\r\n                break\r\n              case '*':\r\n                comment = true\r\n                break\r\n            }\r\n            break\r\n          case \"'\":\r\n          case '\"':\r\n          case '`':\r\n            bracket === -1 ? (valid = false) : (string = char)\r\n            break\r\n          case ')':\r\n          case '{':\r\n          case '}':\r\n            bracket || (scope = {})\r\n            break\r\n          case '.':\r\n          case '[':\r\n            if (!bracket) {\r\n              if (char === '.' || property) {\r\n                body = input.slice(0, index + 1)\r\n                if (scope === globalThis && property === 'self' && !scope.hasOwnProperty('self')) {\r\n                  scope = context\r\n                } else {\r\n                  scope = scope[property] || {}\r\n                }\r\n                char === '.' || (bracket = true)\r\n                property = ''\r\n              } else {\r\n                body = input.slice(0, index + 1)\r\n                scope = globalThis\r\n              }\r\n            }\r\n            break\r\n          case ']':\r\n            bracket === -1 && (bracket = false)\r\n            break\r\n          case '\\\\':\r\n            typeof bracket === 'string' ? ++index : (valid = false)\r\n            break\r\n          case ' ':\r\n            property ? (valid = false) : (body = '')\r\n            break\r\n          default:\r\n            if (regex.test(char, '[\\\\+\\\\-\\\\*\\\\/\\\\^=!&\\\\|\\\\?:\\\\(,;]')) {\r\n              if (!bracket) {\r\n                body = input.slice(0, index + 1)\r\n                scope = globalThis\r\n                property = ''\r\n              }\r\n            } else {\r\n              property += char\r\n            }\r\n        }\r\n      }\r\n    }\r\n    if (valid && scope && !(comment || string)) {\r\n      const properties = [\r\n        ...Object.getOwnPropertyNames(scope.constructor ? scope.constructor.prototype || {} : {}),\r\n        ...Object.getOwnPropertyNames(scope),\r\n      ]\r\n      scope === globalThis && !properties.includes('self') && properties.push('self')\r\n      return properties\r\n        .sort()\r\n        .filter((element) => element.toLowerCase().includes(property.toLowerCase()))\r\n        .filter((name) => bracket || regex.test(name, '[_A-Za-z$][_0-9A-Za-z$]*'))\r\n        .map((name) => {\r\n          if (bracket) {\r\n            return `${body}\\`${regex.replace(name, '`', '\\\\`').split('\\\\').join('\\\\\\\\')}\\`]`\r\n          } else {\r\n            return `${body}${name}`\r\n          }\r\n        })\r\n    } else {\r\n      return []\r\n    }\r\n  },\r\n})\r\n","import '../js'\r\nimport * as base from '../stdlib'\r\nexport * from '../stdlib'\r\n\r\nconst addons = {\r\n  manager: base.env.content.manager,\r\n  plugin: base.env.content.plugin,\r\n  server: base.env.content.server,\r\n}\r\n\r\nexport const stdlib = Object.assign({}, base, addons)\r\n\r\nObject.assign(globalThis, addons, { core: stdlib })\r\n\r\nexport default stdlib\r\n","import stdlib from './stdlib-paper'\r\nexport * from './stdlib-paper'\r\n\r\nexport default stdlib\r\n","import { lifecycle, registerEvent } from '@yam-js/core'\r\nimport { command } from '@yam-js/legacy'\r\nimport { PlayerJoinEvent, PlayerQuitEvent } from 'org.bukkit.event.player'\r\n\r\nconst test = (fn: () => void) => {\r\n  setTimeout(fn, 1000)\r\n}\r\n\r\ntest(() => {\r\n  console.log('Test1 Hello world!')\r\n})\r\n\r\nregisterEvent(PlayerJoinEvent, (event) => {\r\n  console.log(`Test2 Player ${event.getPlayer().getName()} joined the game!`)\r\n})\r\n\r\nregisterEvent(PlayerQuitEvent, (event) => {\r\n  console.log(`Test3 Player ${event.getPlayer().getName()} quit the game!`)\r\n})\r\n\r\ncommand({\r\n  name: 'jsreload',\r\n  execute(sender, ...args) {\r\n    console.log('Test4 Reloading...')\r\n    lifecycle.reload()\r\n  },\r\n})\r\n"],"names":["bukkitManager","Bukkit","getPluginManager","bukkitPlugin","getPlugin","Yam","getConfig","pluginName","bukkitServer","getServer","scan","javaObject","keys","Object","result","reduce","acc","key","_value$toString","value","toString","call","getDebugInfo","Long","Java","type","serverRoot","getDataFolder","getParentFile","plugins","getPlugins","map","plugin","getName","info","yamJS","coreVersion","pluginVersion","legacyVersion","instance","server","players","concat","getOnlinePlayers","size","getMaxPlayers","minecraftVersion","getVersion","bukkitVersion","getBukkitVersion","onlineMode","getOnlineMode","java","version","System","getProperty","vendor","vendorUrl","home","command","timezone","system","os","name","arch","cpu","cores","Runtime","getRuntime","availableProcessors","memory","free","freeMemory","max","maxMemory","MAX_VALUE","total","totalMemory","storage","getFreeSpace","getTotalSpace","usable","getUsableSpace","vlq","createCachedMap","raw","lines","mappings","split","line","decoded","col","decode","sources","startOffset","loadSourceMap","fileContents","sourceMap","JSON","parse","cachedMaps","Map","cacheSourceMap","file","content","set","mapLineInternal","_ref","jsLine","sourceLine","sourceFile","i","length","forEach","segment","_segment$","_segment$2","Error","mapLineToSource","get","startsWith","replace","MiniMessage","space","javaSourceMethodSkips","jsFileSkips","jsMethodSkips","formatError","error","list","push","_loop","item","stack","javaFrame","includes","source","methodName","fileName","some","skip","_ret","join","logError","msg","jsError","_error$getClass$getNa","_error$getClass","_error$getClass$call","_error$getClass$call$","errorType","getClass","undefined","__interop","catchError","errorMsg","getConsoleSender","sendMessage","miniMessage","deserialize","console","log","message","catchAndLogUnhandledError","fn","asyncCatchAndLogUnhandledError","_asyncToGenerator","_x","_x2","apply","arguments","createCatchAndLogUnhandledErrorHandler","createEventListener","extend","Listener","MainInstanceListener","registerEvent","eventClass","eventListenerArg","priority","listener","eventListener","script","class","EventPriority","valueOf","x","signal","isVerboseLoggingEnabled","logVerbose","verbose","Context","Symbol","nextTick","ctx","ticker","isActive","tickFns","tick","createTicker","task","start","setTickFn","stop","cancel","getTick","registerTickFn","isTick","isTaskId","id","taskId","createTickerTasks","context","nextId","taskIdMap","remove","delete","add","baseTick","options","_options$nextId","targetTick","Math","reset","runTask","run","initialize","tickerTasks","baseTimer","callback","delay","modifier","setTimeout","setInterval","setImmediate","clearTimeout","initializeTimers","globalThis","clearInterval","__INTERNAL_LIFECYCLE","createLifecycleHandler","hooks","isReloading","executeHooks","group","priorityHooks","values","filter","hook","_loop2","setOnCloseFn","reload","_reload","register","_hooks$get","callbacks","_objectSpread","lifecycle","HandlerList","isInitialized","setLoggerFn","getMeta","unregisterAll","Core","assign","session","data","load","poly","index","Set","Files","JavaString","Paths","Pattern","Scanner","URL","UUID","desync","provide","provider","uuid","meta","emit","stringify","status","request","path","_arguments","exists","randomUUID","promise","on","create","io","getAbsolutePath","open","response","shift","env","Promise","resolve","reject","getScheduler","runTaskAsynchronously","Runnable","_ref2","chain","input","handler","loop","namespace","aliases","permission","sender","label","args","hasPermission","execute","alias","_catchAndLogUnhandled","tabComplete","Command","addSyntax","getInput","slice","ArgumentType","StringArray","setSuggestionCallback","suggestion","completion","addEntry","SuggestionEntry","registry","handle","interval","period","_len","Array","_key","future","timeout","ceil","err","_len2","_key2","destroy","channel","off","dummy","swap","_len3","more","_key3","normalize","has","root","json","manager","MinecraftServer","getExtensionManager","extension","getExtension","node","getEventNode","getCommandManager","fetch","link","async","read","then","aux","operation","stream","useDelimiter","next","openStream","getPath","_len4","_key4","toFile","record","children","listFiles","sub","directory","parent","mkdir","entry","createNewFile","_len5","_key5","flush","isDirectory","regex","readAllBytes","toPath","write","getBytes","ReferenceError","test","expression","matches","replacement","compile","matcher","replaceAll","getRoot","simplify","object","placeholder","objects","output","iterator","sync","catch","__dirname","charset","atob","str","String","bc","bs","buffer","idx","charAt","fromCharCode","indexOf","btoa","block","charCode","charCodeAt","queueMicrotask","Class","Iterable","Iterator","Spliterator","array","forEachRemaining","circular","format","reason","sets","condense","getCanonicalName","string","clazz","getOwnPropertyNames","getOwnPropertySymbols","self","hasOwnProperty","Polyglot","eval","whoops","body","scope","valid","bracket","comment","property","char","properties","constructor","prototype","sort","element","toLowerCase","base","addons","stdlib","core","PlayerJoinEvent","PlayerQuitEvent","event","getPlayer"],"sourceRoot":""}